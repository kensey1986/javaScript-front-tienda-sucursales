<app-loading *ngIf="loadingService.modal"></app-loading>
<div class="card">
  <div class="card-header bg-dark text-muted">
    <h4>
      <strong>
        {{ titulo }}
      </strong>
    </h4>
  </div>
  <div class="card-body">
    <h4 class="card-title">
      <a
        [routerLink]="['/reportes']"
        class="btn btn-rounded btn-outline-warning btn-xs"
      >
        &laquo; volver
      </a>
    </h4>
    <form #reporteForm="ngForm" *ngIf="reporte.producto">
        <mat-card>
            <mat-card-content>
              <div class="form-group row" >
                <label  for="producto" class="col-sm-2 col-form-label">
                  <strong> Producto: </strong>
                </label>
                <div class="col-sm-6">
                  <input
                    type="text"
                    name="producto"
                    value="{{ reporte.producto.nombre }} "
                    class="form-control"
                    disabled
                  />
                </div>
              </div>
              <div class="form-group row" >
                <label for="cantidadStock" class="col-sm-2 col-form-label">
                  <strong> Stock: </strong>
                </label>
                <div class="col-sm-6">
                  <input
                    type="text"
                    name="cantidadStock"
                    value="{{ reporte.producto.cantidad }} "
                    class="form-control"
                    disabled
                  />
                </div>
              </div>
              <div class="form-group row" >
                <label for="nombreReporte" class="col-form-label col-sm-2">Tipo</label>
                <div class="col-sm-6">
                  <select  class="form-control" 
                  [(ngModel)]="reporte.nombre" name="nombreReporte" style="width:250px;">
                    <option *ngIf="idLocal" [ngValue]="undefined">--- selecionar un tipo ---</option>
                    <option *ngFor="let reporte of reportesLocales" [ngValue]="reporte">
                        {{reporte}}
                    </option>
                  </select>
                </div>
              </div>
              <div class="form-group row" >
                <label *ngIf="idLocal" for="cantidad" class="col-sm-2 col-form-label">
                  <strong> Retirar: </strong>
                </label>
                <label *ngIf="!idLocal" for="cantidad" class="col-sm-2 col-form-label">
                  <strong> Retiro: </strong>
                </label>
                <div class="col-sm-6">
                    <input type="number" class="form-control "
                        [(ngModel)]="reporte.cantidad"
                        style="text-transform:uppercase;"
                        placeholder="Cantidad de producto que desea retirar"
                        id="cantidad"
                        name="cantidad"
                        #cantidad="ngModel"
                        ng-model="reporte.cantidad"
                        requiered>
                    <div *ngIf="cantidad.invalid && (cantidad.dirty || cantidad.touched)"
                            class="alert alert-danger">
                      <div class="" *ngIf="cantidad?.errors?.required" >
                        Cantidad de retiro es Requerida
                      </div>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                <label for="descripcion" class="col-sm-2 col-form-label">
                  <strong> Descripcion: </strong>
                </label>
                <div class="col-sm-6">
                  <textarea
                    name="descripcion"
                    [(ngModel)]="reporte.descripcion"
                    class="form-control"
                  ></textarea>
                </div>
              </div>
              <div class="form-group row">
                <div class="col-sm-6">
                        <button *ngIf="idLocal"
                          class="btn btn-primary"
                          role="button"
                          (click)="create(reporteForm)"
                          [disabled]="!reporteForm.form.valid">
                            Crear
                        </button>
                        <button *ngIf="!idLocal"
                          class="btn btn-primary"
                          role="button"
                          (click)="actualziar(reporteForm)"
                          [disabled]="!reporteForm.form.valid">
                            Actualizar
                        </button>
                </div>
              </div>
              
            </mat-card-content>
          </mat-card>
    </form>
  </div>
</div>
